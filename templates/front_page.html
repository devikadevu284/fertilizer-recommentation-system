<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fertilizer Recommendation System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Botpress Chatbot Script -->
    <script src="https://cdn.botpress.cloud/webchat/v2/inject.js"></script>
    <script src="https://mediafiles.botpress.cloud/52345432-5432543-5435-435545434/webchat/v2/config.js"></script>

    <!-- Chatbot Custom Styling -->
    <style>
        .webchat {
            height: 600px;
            width: 400px;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>Fertilizer Recommendation System</h2>

        <!-- Fertilizer Recommendation Form -->
        <form action="/predict" method="POST">
            <label>Temperature (Â°C):</label>
            <input type="number" name="temperature" required>

            <label>Humidity (%):</label>
            <input type="number" name="humidity" required>

            <label>Moisture (%):</label>
            <input type="number" name="moisture" required>

            <label>Soil Type:</label>
            <select name="soil">
                <option value="sandy">Sandy</option>
                <option value="clay">Clay</option>
                <option value="loamy">Loamy</option>
            </select>

            <label>Crop Type:</label>
            <select name="crop">
                <option value="wheat">Wheat</option>
                <option value="rice">Rice</option>
                <option value="maize">Maize</option>
                <option value="sugarcane">Sugarcane</option>
            </select>

            <label>Nitrogen (N):</label>
            <input type="number" name="nitrogen" required>

            <label>Potassium (K):</label>
            <input type="number" name="potassium" required>

            <label>Phosphorous (P):</label>
            <input type="number" name="phosphorous" required>

            <button type="submit">Get Recommendation</button>
        </form>

        {% if prediction_text %}
            <div class="result">{{ prediction_text }}</div>
        {% endif %}
    </div>

    <!-- Botpress Chatbot Container -->
    <div class="webchat">
        <iframe
            style="height: 100%; width: 100%; border: none;"
            srcdoc='<!doctype html>
            <html lang="en">
              <head></head>
              <body>
                <script src="https://cdn.botpress.cloud/webchat/v2.2/inject.js"></script>
                <script defer>
                  window.botpress.on("webchat:ready", (conversationId) => {
                    botpress.open();
                  });
                  window.botpress.init({
                    "botId": "d3aea06d-0f04-4701-bec3-b457caf79902",
                    "configuration": {
                      "website": {},
                      "email": {},
                      "phone": {},
                      "termsOfService": {},
                      "privacyPolicy": {},
                      "color": "#3B82F6",
                      "variant": "solid",
                      "themeMode": "light",
                      "fontFamily": "inter",
                      "radius": 1
                    },
                    "clientId": "0e772c62-e321-46b5-a9fb-a88c5104e067"
                  });
                </script>
              </body>
            </html>'
        ></iframe>
    </div>
</body>
</html>
