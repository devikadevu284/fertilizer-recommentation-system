<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fertilizer Recommendation System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <!-- Botpress Chatbot Script -->
    <script src="https://cdn.botpress.cloud/webchat/v2.3/inject.js"></script>

    <!-- Chatbot Custom Styling -->
    <style>
        #webchat {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            width: 400px;
            height: 600px;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        #webchat .bpWebchat {
            border-radius: 15px;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>Fertilizer Recommendation System</h2>

        <!-- Fertilizer Recommendation Form -->
        <form action="/predict" method="POST">
            <label>Temperature (Â°C):</label>
            <input type="number" name="temperature" required>

            <label>Humidity (%):</label>
            <input type="number" name="humidity" required>

            <label>Moisture (%):</label>
            <input type="number" name="moisture" required>

            <label>Soil Type:</label>
            <select name="soil">
                <option value="sandy">Sandy</option>
                <option value="clay">Clay</option>
                <option value="loamy">Loamy</option>
            </select>

            <label>Crop Type:</label>
            <select name="crop">
                <option value="wheat">Wheat</option>
                <option value="rice">Rice</option>
                <option value="maize">Maize</option>
                <option value="sugarcane">Sugarcane</option>
            </select>

            <label>Nitrogen (N):</label>
            <input type="number" name="nitrogen" required>

            <label>Potassium (K):</label>
            <input type="number" name="potassium" required>

            <label>Phosphorous (P):</label>
            <input type="number" name="phosphorous" required>

            <button type="submit">Get Recommendation</button>
        </form>

        {% if prediction_text %}
            <div class="result">{{ prediction_text }}</div>
        {% endif %}
    </div>

    <!-- Botpress Chatbot Container -->
    <div id="webchat"></div>

    <!-- Chatbot Initialization -->
    <script>
        window.botpress.on("webchat:ready", () => {
            window.botpress.open();
        });

        window.botpress.init({
            botId: "4884fa89-2034-4a32-b60b-0fa009b88c12", // ðŸ”¥ Replace this with your Botpress bot ID
            clientId: "918318b9-2bcf-40d9-ab0c-3204748478d8", // ðŸ”¥ Replace this with your Botpress client ID
            theme: "light",
            botName: "FertilizerBot",
            avatarUrl: "https://cdn-icons-png.flaticon.com/512/2933/2933925.png",
            stylesheet: "https://cdn.botpress.cloud/webchat/v2.3/style.css",
            layoutWidth: "400px"
        });
    </script>
</body>
</html>

